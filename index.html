<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Display</title>

<link rel="stylesheet" href="style.css" type="style.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.simpleWeather/3.0.2/jquery.simpleWeather.min.js"></script>
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script>google.load("gdata", "1");</script>



</head>

<body>
	<div class="container">

		<div class="row row1">
			<section class="sub-box time-box">
				<div class="corner-title">TODAY</div>
				<div class="corner-background today"></div> 
				<div class="current-time"></div>
				<div class="current-day"></div>
			</section>

			<section class="sub-box weather-box">
				<div class="corner-title corner-highlight">WEATHER</div>
				<div class="corner-background weather"></div> 
				<div class="current-weather"></div>
			</section>

			<section class="sub-box meetings-box">
				<div class="corner-title corner-highlight">MEETINGS</div>
				<div class="corner-background meetings"></div> 
				<div class="meetings-section">
					<span class="meeting-h1">NEXT MEETING</span>
					<div class="next-meetings-section">
						<div class="meeting-info next-meeting-time"></div>
						<div class="meeting-info next-meeting-title"></div>
						<div class="meeting-info next-meeting-location"></div>
					</div>

					<span class="meeting-h2">UPCOMING MEETINGS</span>
					<div class="upcoming-meetings-section">
					</div>
				</div>

			</section>
		</div>

		<div class="row row2">
			<section id="offsite-box">
				<div class="corner-title">OFFSITE EVENTS</div>
				<div class="corner-background offsite"></div> 
				<div class="title">THOUGHT LEADERSHIP</div>
				<p><span class="highlight">Maga Leadership Attend Pop Tech 2014</span><br>
				Lorem ipsum dolar sit amet, consect adipicing elite.</p>
				<p><span class="highlight">Magateers Get Graphic At NYC CIO Conference</span><br>
				Lorem ipsum dolar sit amet, consect adipicing elite.</p>
			</section>
		</div>

		<div class="row row3">
			<section id="client-box">
				<div class="corner-title">CLIENT FACING</div>
				<div class="corner-background client"></div> 
				<div class="title">ON THE BUSINESS</div>
				
				<div class="announcements">
					<span class="title-highlight">ANNOUNCEMENTS</span>
					<p>Lorem ipsum dolar sit amet, consect adipicing elite.</p>
					<p>Lorem ipsum dolar sit amet, consect adipicing elite.</p>
					<p>Lorem ipsum dolar sit amet, consect adipicing elite. Lorem ipsum dolar sit amet, consect adipicing elite.</p>
				</div>

				<div class="events">
					<span class="title-highlight">EVENTS</span>
					<div class="event">
						<div class="event-date">10/24</div>
						<div class="event-info">Lorem ipsum dolar sit amet, consect adipicing elite.</div>
					</div>
					<div class="event">
						<div class="event-date">10/24</div>
						<div class="event-info">Lorem ipsum dolar sit amet, consect adipicing elite.</div>
					</div>
				</div>

			</section>
		</div>

		<div class="row row4">
			<section id="maga-box">
				<div class="corner-title">MAGA CULTURE</div>
				<div class="corner-background culture"></div> 
				<div class="title">IN THE BUSINESS</div>

				<div class="announcements">
					<span class="title-highlight">ANNOUNCEMENTS</span>
					<p>Lorem ipsum dolar sit amet, consect adipicing elite.</p>
					<p>Lorem ipsum dolar sit amet, consect adipicing elite.</p>
					<p>Lorem ipsum dolar sit amet, consect adipicing elite. Lorem ipsum dolar sit amet, consect adipicing elite.</p>
				</div>

				<div class="events">
					<span class="title-highlight">EVENTS</span>
					<div class="event">
						<div class="event-date">10/24</div>
						<div class="event-info">Lorem ipsum dolar sit amet, consect adipicing elite.</div>
					</div>
					<div class="event">
						<div class="event-date">10/24</div>
						<div class="event-info">Lorem ipsum dolar sit amet, consect adipicing elite.</div>
					</div>
					<div class="event">
						<div class="event-date">10/24</div>
						<div class="event-info">Lorem ipsum dolar sit amet, consect adipicing elite.</div>
					</div>
				</div>

			</section>
		</div>
	
	</div><!--container ends-->

	<div class="maga-logo"></div>

</body>

<script>

$(document).ready(function () {


	var currentDate = new Date();

	function formatTime(){
		var date = new Date();
		var hours = date.getHours();
		//console.log("this is the hour time" + hours);
		var minutes = date.getMinutes();
		//console.log("this is the minutes time" + minutes);

		var ampm = hours >= 12 ? 'pm' : 'am';
		minutes = minutes < 10 ? '0'+minutes : minutes;
		hours = hours % 12;
		hours = hours ? hours : 12; //explain this
		var displayTime = hours + ':' + minutes + ' ' + ampm;
		//console.log(displayTime);
		$('.row1').find($('.current-time')).text(displayTime);

		window.setTimeout (function(){
			formatTime();
		}, 10*1000);
	}

	formatTime();

	function formatDate(){
		var date = new Date();
		var weekday = new Array();
		weekday[0]=  "Sunday";
		weekday[1] = "Monday";
		weekday[2] = "Tuesday";
		weekday[3] = "Wednesday";
		weekday[4] = "Thursday";
		weekday[5] = "Friday";
		weekday[6] = "Saturday";

		var month = new Array();
		month[0] = "Jan";
		month[1] = "Feb";
		month[2] = "March";
		month[3] = "April";
		month[4] = "May";
		month[5] = "June";
		month[6] = "July";
		month[7] = "Aug";
		month[8] = "Sept";
		month[9] = "Oct";
		month[10] = "Nov";
		month[11] = "Dec";

		var displayDay = weekday[date.getDay()];
		var displayMonth = month[date.getMonth()];
		var displayDate = currentDate.getDate();

		var displayWholeDate = (displayDay + ', ' + displayMonth + ' ' + displayDate);
		$('.row1').find($('.current-day')).text(displayWholeDate);

		window.setTimeout(function(){
			formatDate();
		}, 10*1000);
	}

	formatDate();





	$.simpleWeather({
	    location: 'Washington, DC',
	    woeid: '',
	    unit: 'f',
	    success: function(weather) {
		    console.log(weather);
		    var html = weather.temp+'&deg;'+weather.units.temp;
		    $(".current-weather").html(html);
	    },
	    error: function(error) {
	      $(".current-weather").html('<p>'+error+'</p>');
	    }
  	});

	




	google.setOnLoadCallback(callback);

	

	

	// The callback method that will be called when getAllCalendarsFeed() returns feed data
	var callback = function(result) {

		console.log(result);

		var entries = result.feed.entry;

		if(entries==0){
			alert("There are no events");
		}
		
		var nextMeetingEntry = entries[0];
		

		var nextMeetingTitle = nextMeetingEntry.getTitle().getText();
		var nextMeetingWhen = nextMeetingEntry.getSummary().getText();
		$('.row1').find($('.next-meeting-time')).html(nextMeetingWhen);
		$('.row1').find($('.next-meeting-title')).html(nextMeetingTitle);

		for (var i = 1; i < 3; i++) {  //i < 3 only shows 2 results at a time
		
		    var calendarEntryUpcoming = entries[i];
		    //console.log(calendarEntryUpcoming);

		    var times = calendarEntryUpcoming.getTimes();
			console.log(times);


		    var calendarTitle = calendarEntryUpcoming.getTitle().getText();
		    var calendarWhen = calendarEntryUpcoming.getSummary().getText();

		    $('.row1').find($('.upcoming-meetings-section')).append('<div class="meeting-info upcoming-meeting-time">' + calendarWhen + '</div>');
		    $('.row1').find($('.upcoming-meetings-section')).append('<div class="meeting-info upcoming-meeting-title">' + calendarTitle + '</div>');
		}

		// window.setTimeout(function(){
		// 	$('.upcoming-meetings-section').empty();
		// 	calendarService.getAllCalendarsFeed(feedUrl, callback, handleError);
		// 	console.log("calendar refreshed");
		// }, 500*1000);

	}

	// Error handler to be invoked when getAllCalendarsFeed() produces an error
	var handleError = function(error) {
	  console.log(error);
	}





	var myService;
	// Create the calendar service object
	myService = new google.gdata.calendar.CalendarService('GoogleInc-jsguide-1.0');
	logMeIn();

	var feedUrl = 'https://www.google.com/calendar/feeds/magadesign.com_3337343339303832393534%40resource.calendar.google.com/private/basic?futureevents=true&sortorder=ascending';

	function logMeIn() {
	  scope = "https://www.google.com/calendar/feeds/";
	  var token = google.accounts.user.login(scope);
	}

	var query = new google.gdata.calendar.CalendarEventQuery(feedUrl);

    // Submit the request using the calendar service object
	myService.getEventsFeed(query, callback, handleError);	

});	
	

// 	function formatDate(date) {
// 	  var hours = date.getHours();
// 	  var minutes = date.getMinutes();
// 	  var ampm = hours >= 12 ? 'pm' : 'am';
// 	  // hours = hours % 12;
// 	  // hours = hours ? hours : 12; // the hour '0' should be '12'
// 	  minutes = minutes < 10 ? '0'+minutes : minutes;
// 	  var strTime = hours + ':' + minutes + ' ' + ampm;
// 	  return date.getMonth()+1 + "/" + date.getDate() + "/" + date.getFullYear() + "  " + strTime;
// 	}

// var d = new Date();
// var e = formatDate(d);
// console.log(e);

</script>
</html>